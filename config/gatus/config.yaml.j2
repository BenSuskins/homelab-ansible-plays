metrics: true

alerting:
  discord:
    webhook-url: "{{ GATUS_DISCORD_WEBHOOK }}"
    title: "Gatus"
    default-alert:
      description: "Health check failed"
      send-on-resolved: true
      failure-threshold: 3
      success-threshold: 2

endpoints:
{% for svc in monitored_services %}
{% set url = "http://" ~ svc.ip ~ ":" ~ svc.port ~ (svc.healthcheck_path if svc.healthcheck_path is defined else "") %}
  - name: {{ svc.container }}
    url: {{ url }}
    interval: 60s
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: discord
{% endfor %}
  - name: pelican
    url: http://192.168.0.202
    interval: 60s
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: discord

security:
  oidc:
    issuer-url: https://authentik.suskins.co.uk/application/o/gatus/
    client-id: {{ GATUS_OIDC_CLIENT_ID }}
    client-secret: {{ GATUS_OIDC_CLIENT_SECRET }}
    redirect-url: http://192.168.0.104:8080/authorization-code/callback
    scopes: [openid]
